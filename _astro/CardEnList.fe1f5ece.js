import{j as e,V as b,t as j,S as w,c as m,u as y,a as v}from"./VideoOpenButton.32476241.js";import{r as o}from"./index.ffcfdfb8.js";import{p as N}from"./popover.b063bd20.js";const S=({id:l,title:n,description:t,videos:i,allKeywords:g,keywordIds:u,storyLabel:c,hasEnThumbnail:x})=>{const d=`${l.toString().padStart(2,"0")}.jpg`;return e.jsxs("div",{id:`card-${l}`,className:"flex h-full flex-col overflow-hidden rounded-[2rem] bg-white shadow-[0_0_1rem_rgba(31,100,164,0.08)]",children:[e.jsx("img",{src:x?`../assets/images-en/${d}`:`../assets/images/${d}`,alt:"",width:"320",height:"180",className:"aspect-video w-full bg-gray-200 object-cover",loading:l<3?"eager":"lazy"}),e.jsxs("div",{className:"flex basis-full flex-col p-4 pb-6 sm:p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"font-barlow leading-tight",children:c||`STORY ${l.toString().padStart(2,"0")}`}),e.jsx("h2",{className:"mb-3 mt-1 flex text-xl font-bold leading-normal md:text-2xl",children:n}),u?.length>0&&e.jsx("ul",{className:"flex flex-wrap gap-1",children:u?.map(r=>e.jsx("li",{className:"rounded-sm border border-neutral-200 bg-neutral-50 px-1.5 py-1 text-xs leading-none text-neutral-500 sm:text-3.25",children:g[r].label},r))}),e.jsx("p",{className:"mt-3 text-xs leading-relaxed sm:text-sm sm:leading-relaxed",children:t})]}),e.jsx("div",{className:"-mx-1 mt-auto flex flex-wrap justify-stretch gap-2",children:i.map((r,p)=>e.jsx("div",{className:"flex min-w-[9.5rem] grow basis-[calc(50%-0.5rem)] flex-col items-center gap-2",children:e.jsx(b,{videoId:r.id,customLabel:r.buttonLabel,index:p,isEn:!0})},r.id))})]})]})},k=({storiesData:l,onClick:n})=>(o.useEffect(()=>{N(".js-toc-trigger",".js-toc-container")},[]),e.jsxs("nav",{className:j("js-toc-container invisible fixed right-0 top-16 z-10 mx-4 h-min max-h-[40rem] max-w-[22rem] shrink-0 basis-1/4 translate-y-1 overflow-hidden rounded-3xl bg-white p-2 py-3 leading-snug opacity-0 shadow-[0_0_1rem_rgba(31,100,164,0.2)] transition-all","md:max-w-md","xl:visible xl:sticky xl:top-8 xl:mx-0 xl:h-min xl:max-h-[calc(100svh-4rem)] xl:max-w-none xl:translate-y-0 xl:rounded-[2rem] xl:p-2 xl:py-5 xl:opacity-100 xl:shadow-[0_0_1rem_rgba(31,100,164,0.08)]","2xl:basis-1/6"),children:[e.jsx("div",{className:"mx-2 mb-1.5 hidden border-b border-sky-400 pb-2 text-center font-bold text-sky-600 xl:block",children:"Contents"}),e.jsx("div",{className:"max-h-[calc(100svh-7.5rem)] overflow-y-auto outline-none xl:max-h-[30rem] xl:rounded-2xl xl:focus-visible:bg-sky-50/40",children:e.jsx("ul",{className:"flex flex-col",children:l.map(({id:t,title:i})=>e.jsx("li",{className:"before:mx-auto before:block before:h-px before:w-11/12 before:bg-sky-100 [&:first-child]:before:hidden",children:e.jsxs("a",{href:`#card-${t}`,onClick:n,className:"js-toc-close-trigger my-1.5 flex w-full items-center gap-2 rounded-2xl px-3 py-1.5 text-left outline-none ring-0 transition-all hover:bg-sky-50 focus-visible:bg-sky-50",children:[e.jsx("span",{className:"min-w-[1.25rem] font-barlow text-lg tabular-nums leading-tight text-sky-600",children:t}),e.jsx("span",{className:"text-sm",children:i})]})},t))})})]})),$=({allKeywords:l,allData:n})=>{const[t,i]=o.useState(null),[g,u]=o.useState(null),c=o.useRef(null),x=o.useRef(null),d=o.useRef(!1),r=t?n.filter(s=>s.keywordIds?.includes(t.id)):n,p=s=>{i(s),x.current.scrollIntoView({behavior:"smooth",block:"start"})},f=()=>{c.current&&c.current.clearValue()},h=({children:s,...a})=>(o.useEffect(()=>{if(!x.current)return;x.current.querySelector("input").focus()},[]),y(),e.jsx(v.Input,{...a,onCompositionStart:()=>d.current=!0,onCompositionEnd:()=>{d.current=!1,u("inputEnd")},onKeyDown:()=>u("inputStart"),children:s}));return e.jsxs(e.Fragment,{children:[e.jsxs("div",{ref:x,className:"mx-auto mb-8 flex max-w-xl flex-col items-center gap-2 px-6 sm:flex-row",children:["Narrow down by keyword"," ",e.jsx(w,{className:"min-w-[15rem] grow",components:{Input:h},isClearable:!0,isSearchable:!0,onChange:p,options:l,placeholder:"Please enter",ref:c,noOptionsMessage:()=>d.current?"Typing...":"No matching keywords",styles:{control:(s,a)=>({...s,boxShadow:"none",borderColor:a.isFocused?m.sky[600]:m.neutral[400],"&:hover":{borderColor:m.sky[600]}}),noOptionsMessage:s=>({...s,textAlign:"left"}),option:(s,a)=>({...s,backgroundColor:a.isFocused||a.isSelected?m.sky[100]:"transparent",color:a.isSelected?m.sky[600]:m.neutral[700]})}})]}),e.jsxs("div",{className:"flex flex-row-reverse gap-6 lg:gap-8 2xl:gap-10",children:[e.jsx("ul",{className:"grid auto-rows-max grid-cols-1 gap-6 md:grid-cols-2 lg:gap-8 2xl:grid-cols-3 2xl:gap-10",children:r.map(s=>e.jsx("li",{children:e.jsx(S,{...s,allKeywords:l})},s.id))}),e.jsx(k,{storiesData:n,onClick:()=>{f(),i(null)}})]})]})};export{$ as default};
