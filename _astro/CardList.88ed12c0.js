import{j as e,b,V as j,t as w,S as v,c as d,u as y,a as N}from"./VideoOpenButton.32476241.js";import{r as o}from"./index.ffcfdfb8.js";import{p as S}from"./popover.b063bd20.js";const k=({videoId:t})=>e.jsx("button",{"data-micromodal-trigger":`modal-${t}`,className:b("js-subtitled-video-trigger flex w-full items-center justify-center gap-2 rounded-full p-2 text-xs leading-tight text-neutral-600 outline-none hover:text-neutral-500 sm:text-sm","focus-visible:bg-neutral-50 focus-visible:ring-1 focus-visible:ring-gray-400"),children:e.jsxs("span",{className:"flex items-center gap-2 border-b border-neutral-400 pb-1",children:[e.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[e.jsx("rect",{x:"0.5",y:"1.5",width:"15",height:"13",rx:"2.5",stroke:"currentColor"}),e.jsx("rect",{x:"3",y:"8",width:"10",height:"1",fill:"currentColor"}),e.jsx("rect",{x:"3",y:"11",width:"3",height:"1",fill:"currentColor"}),e.jsx("rect",{x:"7",y:"11",width:"6",height:"1",fill:"currentColor"})]}),"字幕ありで見る"]})}),C=({id:t,title:n,description:r,videos:i,allKeywords:g,keywordIds:m,storyLabel:c})=>{const x=`${t.toString().padStart(2,"0")}.jpg`;return e.jsxs("div",{id:`card-${t}`,className:"flex h-full flex-col overflow-hidden rounded-[2rem] bg-white shadow-[0_0_1rem_rgba(31,100,164,0.08)]",children:[e.jsx("img",{src:`./assets/images/${x}`,alt:"",width:"320",height:"180",className:"aspect-video w-full bg-gray-200 object-cover",loading:t<3?"eager":"lazy"}),e.jsxs("div",{className:"flex basis-full flex-col p-4 pb-6 sm:p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"font-barlow leading-tight",children:c||`STORY ${t.toString().padStart(2,"0")}`}),e.jsx("h2",{className:"mb-3 mt-1 flex text-xl font-bold leading-normal md:text-2xl",children:n}),m?.length>0&&e.jsx("ul",{className:"flex flex-wrap gap-1",children:m?.map(l=>e.jsx("li",{className:"rounded-sm border border-neutral-200 bg-neutral-50 px-1.5 py-1 text-xs leading-none text-neutral-500 sm:text-3.25",children:g[l].label},l))}),e.jsx("p",{className:"mt-3 text-xs leading-relaxed sm:text-sm sm:leading-relaxed",children:r})]}),e.jsx("div",{className:"-mx-1 mt-auto flex flex-wrap justify-stretch gap-2",children:i.map((l,u)=>e.jsxs("div",{className:"flex min-w-[9.5rem] grow basis-[calc(50%-0.5rem)] flex-col items-center gap-2",children:[e.jsx(j,{videoId:l.id,customLabel:l.buttonLabel,index:u}),e.jsx(k,{videoId:l.id})]},l.id))})]})]})},_=({storiesData:t,onClick:n})=>(o.useEffect(()=>{S(".js-toc-trigger",".js-toc-container")},[]),e.jsxs("nav",{className:w("js-toc-container invisible fixed right-0 top-16 z-10 mx-4 h-min max-h-[40rem] max-w-[22rem] shrink-0 basis-1/4 translate-y-1 overflow-hidden rounded-3xl bg-white p-2 py-3 leading-snug opacity-0 shadow-[0_0_1rem_rgba(31,100,164,0.2)] transition-all","md:max-w-md","xl:visible xl:sticky xl:top-8 xl:mx-0 xl:h-min xl:max-h-[calc(100svh-4rem)] xl:max-w-none xl:translate-y-0 xl:rounded-[2rem] xl:p-2 xl:py-5 xl:opacity-100 xl:shadow-[0_0_1rem_rgba(31,100,164,0.08)]","2xl:basis-1/6"),children:[e.jsx("div",{className:"mx-2 mb-1.5 hidden border-b border-sky-400 pb-2 text-center font-bold text-sky-600 xl:block",children:"目次"}),e.jsx("div",{className:"max-h-[calc(100svh-7.5rem)] overflow-y-auto outline-none xl:max-h-[30rem] xl:rounded-2xl xl:focus-visible:bg-sky-50/40",children:e.jsx("ul",{className:"flex flex-col",children:t.map(({id:r,title:i})=>e.jsx("li",{className:"before:mx-auto before:block before:h-px before:w-11/12 before:bg-sky-100 [&:first-child]:before:hidden",children:e.jsxs("a",{href:`#card-${r}`,onClick:n,className:"js-toc-close-trigger my-1.5 flex w-full items-center gap-2 rounded-2xl px-3 py-1.5 text-left outline-none ring-0 transition-all hover:bg-sky-50 focus-visible:bg-sky-50",children:[e.jsx("span",{className:"min-w-[1.25rem] font-barlow text-lg tabular-nums leading-tight text-sky-600",children:r}),e.jsx("span",{className:"text-sm",children:i})]})},r))})})]})),I=({allKeywords:t,allData:n})=>{const[r,i]=o.useState(null),[g,m]=o.useState(null),c=o.useRef(null),x=o.useRef(null),l=o.useRef(!1),u=r?n.filter(s=>s.keywordIds?.includes(r.id)):n,h=s=>{i(s),x.current.scrollIntoView({behavior:"smooth",block:"start"})},f=()=>{c.current&&c.current.clearValue()},p=({children:s,...a})=>(o.useEffect(()=>{if(!x.current)return;x.current.querySelector("input").focus()},[]),y(),e.jsx(N.Input,{...a,onCompositionStart:()=>l.current=!0,onCompositionEnd:()=>{l.current=!1,m("inputEnd")},onKeyDown:()=>m("inputStart"),children:s}));return e.jsxs(e.Fragment,{children:[e.jsxs("div",{ref:x,className:"mx-auto mb-8 flex max-w-xl flex-col items-center gap-2 px-6 sm:flex-row",children:["キーワードから絞り込む"," ",e.jsx(v,{className:"min-w-[15rem] grow",components:{Input:p},isClearable:!0,isSearchable:!0,onChange:h,options:t,placeholder:"入力してください",ref:c,noOptionsMessage:()=>l.current?"入力中...":"一致するキーワードがありません",styles:{control:(s,a)=>({...s,boxShadow:"none",borderColor:a.isFocused?d.sky[600]:d.neutral[400],"&:hover":{borderColor:d.sky[600]}}),noOptionsMessage:s=>({...s,textAlign:"left"}),option:(s,a)=>({...s,backgroundColor:a.isFocused||a.isSelected?d.sky[100]:"transparent",color:a.isSelected?d.sky[600]:d.neutral[700]})}})]}),e.jsxs("div",{className:"flex flex-row-reverse gap-6 lg:gap-8 2xl:gap-10",children:[e.jsx("ul",{className:"grid auto-rows-max grid-cols-1 gap-6 md:grid-cols-2 lg:gap-8 2xl:grid-cols-3 2xl:gap-10",children:u.map(s=>e.jsx("li",{children:e.jsx(C,{...s,allKeywords:t})},s.id))}),e.jsx(_,{storiesData:n,onClick:()=>{f(),i(null)}})]})]})};export{I as default};
